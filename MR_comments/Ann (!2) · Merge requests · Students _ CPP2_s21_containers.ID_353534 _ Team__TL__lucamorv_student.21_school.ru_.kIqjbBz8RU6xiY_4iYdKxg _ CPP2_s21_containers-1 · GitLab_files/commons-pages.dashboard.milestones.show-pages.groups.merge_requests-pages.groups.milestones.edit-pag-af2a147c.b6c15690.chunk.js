(this.webpackJsonp=this.webpackJsonp||[]).push([[17],{cLtF:function(e,t,i){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createTimelog"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TimelogCreateInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelogCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timelog"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"IssueTimeTrackingFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mergeRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MergeRequestTimeTrackingFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:422}};a.loc.source={body:'#import "~/graphql_shared/fragments/issue_time_tracking.fragment.graphql"\n#import "~/graphql_shared/fragments/merge_request_time_tracking.fragment.graphql"\n\nmutation createTimelog($input: TimelogCreateInput!) {\n  timelogCreate(input: $input) {\n    errors\n    timelog {\n      id\n      issue {\n        ...IssueTimeTrackingFragment\n      }\n      mergeRequest {\n        ...MergeRequestTimeTrackingFragment\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!n[t]&&(n[t]=!0,!0)}))}a.definitions=a.definitions.concat(s(i("RTH5").definitions)),a.definitions=a.definitions.concat(s(i("J8uK").definitions));var r={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==t)return a}}a.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&i.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),r[e.name.value]=t}})),e.exports=a,e.exports.createTimelog=function(e,t){var i={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=r[t]||new Set,n=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){n.has(e)||(n.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return n.forEach((function(t){var a=o(e,t);a&&i.definitions.push(a)})),i}(a,"createTimelog")},"r/PU":function(e,t,i){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"deleteTimelog"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TimelogDeleteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelogDelete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timelog"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issue"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"IssueTimeTrackingFragment"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"mergeRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MergeRequestTimeTrackingFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:422}};a.loc.source={body:'#import "~/graphql_shared/fragments/issue_time_tracking.fragment.graphql"\n#import "~/graphql_shared/fragments/merge_request_time_tracking.fragment.graphql"\n\nmutation deleteTimelog($input: TimelogDeleteInput!) {\n  timelogDelete(input: $input) {\n    errors\n    timelog {\n      id\n      issue {\n        ...IssueTimeTrackingFragment\n      }\n      mergeRequest {\n        ...MergeRequestTimeTrackingFragment\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!n[t]&&(n[t]=!0,!0)}))}a.definitions=a.definitions.concat(s(i("RTH5").definitions)),a.definitions=a.definitions.concat(s(i("J8uK").definitions));var r={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var a=e.definitions[i];if(a.name&&a.name.value==t)return a}}a.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var a=t.type;"NamedType"===a.kind&&i.add(a.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),r[e.name.value]=t}})),e.exports=a,e.exports.deleteTimelog=function(e,t){var i={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var a=r[t]||new Set,n=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){n.has(e)||(n.add(e),(r[e]||new Set).forEach((function(e){s.add(e)})))}))}return n.forEach((function(t){var a=o(e,t);a&&i.definitions.push(a)})),i}(a,"deleteTimelog")},t26s:function(e,t,i){"use strict";i("h8Et");var a=i("H8gz"),n=i("u1ru"),s=i("lT7T"),r=i("cuRJ"),o=i("zLBL"),l=i("qINL"),m=i("ly/8"),u=i("mpzd"),d=i("/LsX"),c=i("t9l/"),p=i("5ee2"),g=i("cBN0"),h={name:"TimeTrackingCollapsedState",components:{GlIcon:a.a},directives:{GlTooltip:m.a},props:{showComparisonState:{type:Boolean,required:!0},showSpentOnlyState:{type:Boolean,required:!0},showEstimateOnlyState:{type:Boolean,required:!0},showNoTimeTrackingState:{type:Boolean,required:!0},timeSpentHumanReadable:{type:String,required:!1,default:""},timeEstimateHumanReadable:{type:String,required:!1,default:""}},computed:{divClass(){return this.showComparisonState?"compare":this.showEstimateOnlyState?"estimate-only":this.showSpentOnlyState?"spend-only":this.showNoTimeTrackingState?"no-tracking":""},spanClass(){return this.showComparisonState?"":this.showEstimateOnlyState||this.showSpentOnlyState?"bold":this.showNoTimeTrackingState?"no-value collapse-truncated-title gl-pt-2 gl-px-3 gl-font-sm":""},text(){return this.showComparisonState?`${this.timeSpentHumanReadable} / ${this.timeEstimateHumanReadable}`:this.showEstimateOnlyState?"-- / "+this.timeEstimateHumanReadable:this.showSpentOnlyState?this.timeSpentHumanReadable+" / --":this.showNoTimeTrackingState?Object(c.a)("None"):""},timeTrackedTooltipText(){let e;return this.showComparisonState?e=Object(c.a)("Time remaining"):this.showEstimateOnlyState?e=Object(c.a)("Estimated"):this.showSpentOnlyState&&(e=Object(c.a)("Time spent")),Object(c.h)("%{title}: %{text}",{title:e,text:this.text})},tooltipText(){return this.showNoTimeTrackingState?Object(c.a)("Time tracking"):this.timeTrackedTooltipText}}},T=i("bPvS"),v=Object(T.a)(h,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip:body.viewport.left",arg:"body",modifiers:{viewport:!0,left:!0}}],staticClass:"sidebar-collapsed-icon",attrs:{title:this.tooltipText,"data-testid":"collapsedState"}},[t("gl-icon",{attrs:{name:"timer"}}),this._v(" "),t("div",{staticClass:"time-tracking-collapsed-summary"},[t("div",{class:this.divClass},[t("span",{class:this.spanClass},[this._v(" "+this._s(this.text)+" ")])])])],1)}),[],!1,null,null,null).exports,f=i("z7LP"),k=i("U1Ws"),S={name:"TimeTrackingComparisonPane",components:{GlProgressBar:f.a},directives:{GlTooltip:m.a},props:{timeSpent:{type:Number,required:!0},timeEstimate:{type:Number,required:!0},timeSpentHumanReadable:{type:String,required:!0},timeEstimateHumanReadable:{type:String,required:!0},limitToHours:{type:Boolean,required:!1,default:!1}},computed:{parsedTimeRemaining(){const e=this.timeEstimate-this.timeSpent;return Object(k.Z)(e,{limitToHours:this.limitToHours})},timeRemainingHumanReadable(){return Object(k.db)(this.parsedTimeRemaining)},timeRemainingTooltip(){const{timeRemainingHumanReadable:e,timeRemainingMinutes:t}=this;return t<0?Object(c.h)(Object(c.g)("TimeTracking|Over by %{timeRemainingHumanReadable}"),{timeRemainingHumanReadable:e}):Object(c.h)(Object(c.g)("TimeTracking|Time remaining: %{timeRemainingHumanReadable}"),{timeRemainingHumanReadable:e})},timeRemainingMinutes(){return this.timeEstimate-this.timeSpent},timeRemainingPercent(){return Math.floor(this.timeSpent/this.timeEstimate*100)},timeRemainingStatusClass(){return this.timeEstimate>=this.timeSpent?"within_estimate":"over_estimate"},progressBarVariant(){return this.timeRemainingPercent>100?"danger":"primary"}}},b=Object(T.a)(S,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gl-mt-2",attrs:{"data-testid":"timeTrackingComparisonPane"}},[i("div",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"compare-meter",class:e.timeRemainingStatusClass,attrs:{"data-testid":"compareMeter",title:e.timeRemainingTooltip}},[i("gl-progress-bar",{attrs:{"data-testid":"timeRemainingProgress",value:e.timeRemainingPercent,variant:e.progressBarVariant}}),e._v(" "),i("div",{staticClass:"compare-display-container gl-display-flex gl-justify-content-space-between gl-mt-2"},[i("div",{staticClass:"gl-float-left"},[i("span",{staticClass:"gl-text-gray-400"},[e._v(e._s(e.s__("TimeTracking|Spent")))]),e._v(" "),i("span",{staticClass:"compare-value spent"},[e._v(e._s(e.timeSpentHumanReadable))])]),e._v(" "),i("div",{staticClass:"estimated gl-float-right"},[i("span",{staticClass:"gl-text-gray-400"},[e._v(e._s(e.s__("TimeTrackingEstimated|Est")))]),e._v(" "),i("span",{staticClass:"compare-value"},[e._v(e._s(e.timeEstimateHumanReadable))])])])],1)])}),[],!1,null,null,null).exports,y=(i("0no1"),i("3R5X"),i("gdbl"),i("g+EE"),i("PJNv")),_=i("teVv"),w=i("LkRf"),E=i("+lve"),O=i("r/PU"),C=i.n(O);var q={components:{GlLoadingIcon:o.a,GlTableLite:y.a,GlButton:r.a},directives:{GlTooltip:m.a},inject:["issuableType"],props:{limitToHours:{type:Boolean,default:!1,required:!1},issuableId:{type:String,required:!0}},data:()=>({report:[],isLoading:!0,removingIds:[]}),apollo:{report:{query(){return p.I[this.issuableType].query},variables(){return this.getQueryVariables()},update(e){return this.isLoading=!1,this.extractTimelogs(e)},error(){Object(_.createAlert)({message:Object(c.a)("Something went wrong. Please try again.")})}}},computed:{deleteButtonTooltip:()=>Object(c.g)("TimeTracking|Delete time spent")},methods:{isDeletingTimelog(e){return this.removingIds.includes(e)},isIssue(){return this.issuableType===u.h},getQueryVariables(){return{id:Object(E.c)(this.getGraphQLEntityType(),this.issuableId)}},getGraphQLEntityType(){return this.isIssue()?w.n:w.q},extractTimelogs(e){var t,i;return((null==e||null===(t=e.issuable)||void 0===t||null===(i=t.timelogs)||void 0===i?void 0:i.nodes)||[]).slice().sort((function(e,t){return new Date(e.spentAt)-new Date(t.spentAt)}))},formatDate:e=>Object(k.q)(e,'mmmm d, yyyy, HH:MM ("UTC:" o)'),getSummary:(e,t)=>null!=e?e:null==t?void 0:t.body,getTotalTimeSpent(){const e=this.report.reduce((function(e,t){return e+t.timeSpent}),0);return this.formatTimeSpent(e)},formatTimeSpent(e){return(e<0?"- ":"")+Object(k.db)(Object(k.Z)(e,{limitToHours:this.limitToHours}))},deleteTimelog(e){var t=this;this.removingIds.push(e),this.$apollo.mutate({mutation:C.a,variables:{input:{id:e}}}).then((function(e){var t,i;let{data:a}=e;if(null!==(t=a.timelogDelete)&&void 0!==t&&null!==(i=t.errors)&&void 0!==i&&i.length)throw new Error(a.timelogDelete.errors[0])})).catch((function(e){Object(_.createAlert)({message:Object(c.g)("TimeTracking|An error occurred while removing the timelog."),captureError:!0,error:e})})).finally((function(){t.removingIds.splice(t.removingIds.indexOf(e),1)}))}},fields:[{key:"spentAt",label:Object(c.a)("Spent at"),sortable:!0,tdClass:"gl-w-quarter"},{key:"user",label:Object(c.a)("User"),sortable:!0},{key:"timeSpent",label:Object(c.a)("Time spent"),sortable:!0,tdClass:"gl-w-15"},{key:"summary",label:Object(c.a)("Summary / note"),sortable:!0},{key:"actions",label:"",tdClass:"gl-w-10"}]},N=Object(T.a)(q,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isLoading?i("div",[i("gl-loading-icon",{attrs:{size:"lg"}})],1):i("gl-table-lite",{attrs:{items:e.report,fields:e.$options.fields,"foot-clone":""},scopedSlots:e._u([{key:"cell(spentAt)",fn:function(t){var a=t.item.spentAt;return[i("div",[e._v(e._s(e.formatDate(a)))])]}},{key:"foot(spentAt)",fn:function(){return[e._v(" ")]},proxy:!0},{key:"cell(user)",fn:function(t){var a=t.item.user;return[i("div",[e._v(e._s(a.name))])]}},{key:"foot(user)",fn:function(){return[e._v(" ")]},proxy:!0},{key:"cell(timeSpent)",fn:function(t){var a=t.item.timeSpent;return[i("div",[e._v(e._s(e.formatTimeSpent(a)))])]}},{key:"foot(timeSpent)",fn:function(){return[i("div",[e._v(e._s(e.getTotalTimeSpent()))])]},proxy:!0},{key:"cell(summary)",fn:function(t){var a=t.item,n=a.summary,s=a.note;return[i("div",[e._v(e._s(e.getSummary(n,s)))])]}},{key:"foot(summary)",fn:function(){return[e._v(" ")]},proxy:!0},{key:"cell(actions)",fn:function(t){var a=t.item,n=a.id;return[a.userPermissions.adminTimelog?i("div",[i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{title:e.deleteButtonTooltip},expression:"{ title: deleteButtonTooltip }"}],attrs:{category:"secondary",icon:"remove","data-testid":"deleteButton",loading:e.isDeletingTimelog(n)},on:{click:function(t){return e.deleteTimelog(n)}}})],1):e._e()]}},{key:"foot(actions)",fn:function(){return[e._v(" ")]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,R=i("nPFI");var x={name:"TimeTrackingSpentOnlyPane",timeSpent:Object(c.g)("TimeTracking|%{spentStart}Spent: %{spentEnd}"),components:{GlSprintf:R.a},props:{timeSpentHumanReadable:{type:String,required:!0}}},I=Object(T.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{"data-testid":"spentOnlyPane"}},[i("gl-sprintf",{attrs:{message:e.$options.timeSpent},scopedSlots:e._u([{key:"spent",fn:function(t){var a=t.content;return[i("span",{staticClass:"gl-font-weight-bold"},[e._v(e._s(a))]),e._v(e._s(e.timeSpentHumanReadable)+"\n    ")]}}])})],1)}),[],!1,null,null,null).exports;var j=i("x3KW"),D=i("tXCq"),F=i("tSMP"),H=i("oSqs"),L=i("Q04j"),P=i("yYHy"),G=i("cLtF"),A=i.n(G),$={components:{GlDatepicker:j.a,GlFormGroup:D.a,GlFormInput:F.a,GlFormTextarea:H.a,GlModal:s.a,GlAlert:L.a,GlLink:n.a,GlSprintf:R.a},inject:["issuableType"],props:{issuableId:{type:String,required:!0}},data:()=>({timeSpent:"",spentAt:null,summary:"",isLoading:!1,saveError:""}),computed:{submitDisabled(){return this.isLoading||0===this.timeSpent.length},primaryProps(){return{text:Object(c.g)("CreateTimelogForm|Save"),attributes:[{variant:"confirm",disabled:this.submitDisabled,loading:this.isLoading}]}},cancelProps:()=>({text:Object(c.g)("CreateTimelogForm|Cancel")}),timeTrackingDocsPath:()=>Object(P.y)(gon.relative_url_root||"","/help/user/project/time_tracking.md"),issuableTypeName(){return this.isIssue()?Object(c.g)("CreateTimelogForm|issue"):Object(c.g)("CreateTimelogForm|merge request")}},methods:{resetModal(){this.isLoading=!1,this.timeSpent="",this.spentAt=null,this.summary="",this.saveError=""},close(){this.resetModal(),this.$refs.modal.close()},registerTimeSpent(e){var t=this;e.preventDefault(),0!==this.timeSpent.length&&(this.isLoading=!0,this.saveError="",this.$apollo.mutate({mutation:A.a,variables:{input:{timeSpent:this.timeSpent,spentAt:this.spentAt?Object(k.q)(this.spentAt,"isoDateTime"):Object(k.q)(Date.now(),"isoDateTime"),summary:this.summary,issuableId:this.getIssuableId()}}}).then((function(e){var i;let{data:a}=e;null!==(i=a.timelogCreate)&&void 0!==i&&i.errors.length?t.saveError=a.timelogCreate.errors[0].message||a.timelogCreate.errors[0]:t.close()})).catch((function(e){t.saveError=(null==e?void 0:e.message)||Object(c.g)("CreateTimelogForm|An error occurred while saving the time entry.")})).finally((function(){t.isLoading=!1})))},isIssue(){return this.issuableType===u.h},getGraphQLEntityType(){return this.isIssue()?w.n:w.q},updateSpentAtDate(e){this.spentAt=e},getIssuableId(){return Object(E.c)(this.getGraphQLEntityType(),this.issuableId)}},CREATE_TIMELOG_MODAL_ID:"create-timelog-modal"},B=Object(T.a)($,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("gl-modal",{ref:"modal",attrs:{title:e.s__("CreateTimelogForm|Add time entry"),"modal-id":e.$options.CREATE_TIMELOG_MODAL_ID,size:"sm","data-testid":"create-timelog-modal","action-primary":e.primaryProps,"action-cancel":e.cancelProps},on:{primary:e.registerTimeSpent,cancel:e.close,close:e.close,hide:e.close}},[i("p",{attrs:{"data-testid":"timetracking-docs-link"}},[i("gl-sprintf",{attrs:{message:e.s__("CreateTimelogForm|Track time spent on this %{issuableTypeNameStart}%{issuableTypeNameEnd}. %{timeTrackingDocsLinkStart}%{timeTrackingDocsLinkEnd}")},scopedSlots:e._u([{key:"issuableTypeName",fn:function(){return[e._v(e._s(e.issuableTypeName))]},proxy:!0},{key:"timeTrackingDocsLink",fn:function(){return[i("gl-link",{attrs:{href:e.timeTrackingDocsPath,target:"_blank"}},[e._v(e._s(e.s__("CreateTimelogForm|How do I track and estimate time?")))])]},proxy:!0}])})],1),e._v(" "),i("form",{staticClass:"gl-display-flex gl-flex-direction-column js-quick-submit",on:{submit:function(t){return t.preventDefault(),e.registerTimeSpent.apply(null,arguments)}}},[i("div",{staticClass:"gl-display-flex gl-gap-3"},[i("gl-form-group",{key:"time-spent",attrs:{"label-for":"time-spent",label:e.s__("CreateTimelogForm|Time spent"),description:e.s__("CreateTimelogForm|Example: 1h 30m")}},[i("gl-form-input",{ref:"timeSpent",staticClass:"gl-form-input-sm",attrs:{id:"time-spent",autocomplete:"off"},model:{value:e.timeSpent,callback:function(t){e.timeSpent=t},expression:"timeSpent"}})],1),e._v(" "),i("gl-form-group",{key:"spent-at",attrs:{optional:"","label-for":"spent-at",label:e.s__("CreateTimelogForm|Spent at")}},[i("gl-datepicker",{attrs:{target:null,value:e.spentAt,"show-clear-button":"",autocomplete:"off",size:"small"},on:{input:e.updateSpentAtDate,clear:function(t){return e.updateSpentAtDate(null)}}})],1)],1),e._v(" "),i("gl-form-group",{staticClass:"gl-mb-0",attrs:{label:e.s__("CreateTimelogForm|Summary"),optional:"","label-for":"summary"}},[i("gl-form-textarea",{attrs:{id:"summary",rows:"3","no-resize":!0},model:{value:e.summary,callback:function(t){e.summary=t},expression:"summary"}})],1),e._v(" "),e.saveError?i("gl-alert",{staticClass:"gl-mt-5",attrs:{variant:"danger",dismissible:!1}},[e._v("\n      "+e._s(e.saveError)+"\n    ")]):e._e(),e._v(" "),i("input",{attrs:{type:"submit",hidden:""}})],1)])}),[],!1,null,null,null).exports,M={name:"IssuableTimeTracker",i18n:{noTimeTrackingText:Object(c.a)("No estimate or time spent"),estimatedOnlyText:Object(c.g)("TimeTracking|Estimated:")},components:{GlIcon:a.a,GlLink:n.a,GlModal:s.a,GlButton:r.a,GlLoadingIcon:o.a,TimeTrackingCollapsedState:v,TimeTrackingSpentOnlyPane:I,TimeTrackingComparisonPane:b,TimeTrackingReport:N,CreateTimelogForm:B},directives:{GlModal:l.a,GlTooltip:m.a},inject:{issuableType:{default:null}},props:{limitToHours:{type:Boolean,default:!1,required:!1},fullPath:{type:String,required:!1,default:""},issuableId:{type:String,required:!1,default:""},issuableIid:{type:String,required:!1,default:""},initialTimeTracking:{type:Object,required:!1,default:null},showCollapsed:{type:Boolean,default:!0,required:!1},canAddTimeEntries:{type:Boolean,required:!1,default:!0}},data(){return{showHelp:!1,timeTracking:{...this.initialTimeTracking}}},apollo:{issuableTimeTracking:{query(){return p.H[this.issuableType].query},skip(){return!this.issuableType||!p.H[this.issuableType]||(!!this.initialTimeTracking||(!this.issuableIid||!this.fullPath))},variables(){return{iid:this.issuableIid,fullPath:this.fullPath}},update(e){var t;this.timeTracking={...null===(t=e.workspace)||void 0===t?void 0:t.issuable}}}},computed:{isTimeTrackingInfoLoading(){var e,t,i;return null!==(e=null===(t=this.$apollo)||void 0===t||null===(i=t.queries.issuableTimeTracking)||void 0===i?void 0:i.loading)&&void 0!==e&&e},timeEstimate(){var e;return(null===(e=this.timeTracking)||void 0===e?void 0:e.timeEstimate)||0},totalTimeSpent(){var e;return(null===(e=this.timeTracking)||void 0===e?void 0:e.totalTimeSpent)||0},humanTimeEstimate(){var e;return(null===(e=this.timeTracking)||void 0===e?void 0:e.humanTimeEstimate)||""},humanTotalTimeSpent(){var e;return(null===(e=this.timeTracking)||void 0===e?void 0:e.humanTotalTimeSpent)||""},hasTotalTimeSpent(){return Boolean(this.totalTimeSpent)},hasTimeEstimate(){return Boolean(this.timeEstimate)},showComparisonState(){return this.hasTimeEstimate&&this.hasTotalTimeSpent},showEstimateOnlyState(){return this.hasTimeEstimate&&!this.hasTotalTimeSpent},showSpentOnlyState(){return this.hasTotalTimeSpent&&!this.hasTimeEstimate},showNoTimeTrackingState(){return!this.hasTimeEstimate&&!this.hasTotalTimeSpent},showHelpState(){return Boolean(this.showHelp)},isTimeReportSupported(){return[u.h,u.b.MergeRequest].includes(this.issuableType)&&this.issuableId},timeTrackingIconTitle(){return this.showHelpState?"":p.a},timeTrackingIconName(){return this.showHelpState?"close":"question-o"}},watch:{initialTimeTracking(e){this.timeTracking=e}},created(){g.a.$on("timeTracker:refresh",this.refresh)},methods:{refresh(){this.$apollo.queries.issuableTimeTracking.refetch()},openRegisterTimeSpentModal(){this.$root.$emit(d.e,"create-timelog-modal")}}},z=Object(T.a)(M,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"time-tracker sidebar-help-wrap",attrs:{"data-testid":"time-tracker"}},[e.showCollapsed?i("time-tracking-collapsed-state",{attrs:{"show-comparison-state":e.showComparisonState,"show-no-time-tracking-state":e.showNoTimeTrackingState,"show-help-state":e.showHelpState,"show-spent-only-state":e.showSpentOnlyState,"show-estimate-only-state":e.showEstimateOnlyState,"time-spent-human-readable":e.humanTotalTimeSpent,"time-estimate-human-readable":e.humanTimeEstimate}}):e._e(),e._v(" "),i("div",{staticClass:"hide-collapsed gl-line-height-20 gl-text-gray-900 gl-display-flex gl-align-items-center gl-font-weight-bold"},[e._v("\n    "+e._s(e.__("Time tracking"))+"\n    "),e.isTimeTrackingInfoLoading?i("gl-loading-icon",{staticClass:"gl-ml-2",attrs:{size:"sm",inline:""}}):e._e(),e._v(" "),e.canAddTimeEntries?i("gl-button",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.left",modifiers:{left:!0}}],staticClass:"gl-ml-auto",attrs:{category:"tertiary",size:"small","data-testid":"add-time-entry-button",title:e.__("Add time entry")},on:{click:function(t){return e.openRegisterTimeSpentModal()}}},[i("gl-icon",{staticClass:"gl-text-gray-900!",attrs:{name:"plus"}})],1):e._e()],1),e._v(" "),e.isTimeTrackingInfoLoading?e._e():i("div",{staticClass:"hide-collapsed"},[e.showEstimateOnlyState?i("div",{attrs:{"data-testid":"estimateOnlyPane"}},[i("span",[e._v(e._s(e.$options.i18n.estimatedOnlyText)+" ")]),e._v(e._s(e.humanTimeEstimate)+"\n    ")]):e._e(),e._v(" "),e.showSpentOnlyState?i("time-tracking-spent-only-pane",{attrs:{"time-spent-human-readable":e.humanTotalTimeSpent}}):e._e(),e._v(" "),e.showNoTimeTrackingState?i("div",{attrs:{"data-testid":"noTrackingPane"}},[i("span",{staticClass:"gl-text-gray-500"},[e._v(e._s(e.$options.i18n.noTimeTrackingText))])]):e._e(),e._v(" "),e.showComparisonState?i("time-tracking-comparison-pane",{attrs:{"time-estimate":e.timeEstimate,"time-spent":e.totalTimeSpent,"time-spent-human-readable":e.humanTotalTimeSpent,"time-estimate-human-readable":e.humanTimeEstimate,"limit-to-hours":e.limitToHours}}):e._e(),e._v(" "),e.isTimeReportSupported?[e.hasTotalTimeSpent?i("gl-link",{directives:[{name:"gl-modal",rawName:"v-gl-modal",value:"time-tracking-report",expression:"'time-tracking-report'"}],attrs:{"data-testid":"reportLink",href:"#"}},[e._v("\n        "+e._s(e.__("Time tracking report"))+"\n      ")]):e._e(),e._v(" "),i("gl-modal",{attrs:{"modal-id":"time-tracking-report",size:"lg",title:e.__("Time tracking report"),"hide-footer":!0}},[i("time-tracking-report",{attrs:{"limit-to-hours":e.limitToHours,"issuable-id":e.issuableId}})],1)]:e._e(),e._v(" "),i("create-timelog-form",{attrs:{"issuable-id":e.issuableId}})],2)],1)}),[],!1,null,null,null);t.a=z.exports}}]);
//# sourceMappingURL=commons-pages.dashboard.milestones.show-pages.groups.merge_requests-pages.groups.milestones.edit-pag-af2a147c.b6c15690.chunk.js.map